/* Electric border + spotlight + 3D tilt + magnetic buttons
   Applied to both Project cards and Skills cards. */

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  .project .card,
  #skills .skill-card,
  .project .card::before,
  #skills .skill-card::before,
  .project .card::after,
  #skills .skill-card::after,
  .project .project-actions .btn,
  #skills .skill-card .btn {
    animation: none !important;
    transition: none !important;
    transform: none !important;
  }
}

/* Variables controlled by JS */
.project .card,
#skills .skill-card {
  --mx: 50%; /* spotlight X (%) */
  --my: 50%; /* spotlight Y (%) */
  --tiltX: 0deg;
  --tiltY: 0deg;
  --pulse: 0.48; /* slightly stronger by default on light theme */

  transform: perspective(900px) rotateX(var(--tiltX)) rotateY(var(--tiltY));
  will-change: transform, filter;
  backface-visibility: hidden;
  transition: transform 0.2s ease;
}

.project .card:hover,
#skills .skill-card:hover {
  transform: perspective(900px) rotateX(var(--tiltX)) rotateY(var(--tiltY));
}

/* Electric ring (outside the card) */
@keyframes electricFlicker {
  0%,
  100% {
    opacity: 0.95;
  }
  7% {
    opacity: 0.78;
  }
  14% {
    opacity: 0.9;
  }
  21% {
    opacity: 0.66;
  }
  33% {
    opacity: 0.94;
  }
  52% {
    opacity: 0.8;
  }
  71% {
    opacity: 0.96;
  }
  86% {
    opacity: 0.75;
  }
}

.project .card::before,
#skills .skill-card::before {
  content: "";
  position: absolute;
  inset: -10px; /* push ring outside */
  border-radius: 20px;
  border: 3px solid var(--electric);
  background: transparent;
  z-index: 2;
  pointer-events: none;

  /* Distort the border and add warm gold bloom */
  filter: url(#electric-displace) drop-shadow(0 0 8px var(--electric-glow))
    drop-shadow(0 0 18px var(--electric-glow))
    drop-shadow(0 0 36px var(--electric-glow));

  animation: electricFlicker 3.2s steps(40, end) infinite;
}

/* Ambient glow + spotlight (warm to match theme) */
@keyframes ambientPulse {
  0% {
    opacity: calc(var(--pulse) - 0.1);
    filter: blur(14px);
  }
  50% {
    opacity: calc(var(--pulse) + 0.1);
    filter: blur(18px);
  }
  100% {
    opacity: calc(var(--pulse) - 0.1);
    filter: blur(14px);
  }
}

.project .card::after,
#skills .skill-card::after {
  content: "";
  position: absolute;
  inset: -22px;
  border-radius: 26px;
  z-index: 1;
  pointer-events: none;
  /* Spotlight follows --mx/--my, plus a softer halo */
  background: radial-gradient(
      220px 140px at var(--mx) var(--my),
      var(--electric-glow) 0%,
      rgba(0, 0, 0, 0) 65%
    ),
    radial-gradient(
      60% 50% at 50% 60%,
      var(--electric-glow) 0%,
      rgba(0, 0, 0, 0) 70%
    );
  animation: ambientPulse 8s ease-in-out infinite;
}

[data-theme="dark"] .project .card::after,
[data-theme="dark"] #skills .skill-card::after {
  --pulse: 0.56;
}

/* Magnetic button */
.project .project-actions .btn,
#skills .skill-card .btn {
  transition: transform 0.18s ease, box-shadow 0.25s ease, filter 0.25s ease;
  will-change: transform, filter, box-shadow;
}
.project .project-actions .btn:hover,
#skills .skill-card .btn:hover {
  filter: saturate(1.1);
  box-shadow: 0 12px 30px rgba(255, 205, 66, 0.35),
    0 6px 16px rgba(0, 0, 0, 0.16), inset 0 1px 0 rgba(255, 255, 255, 0.6);
}
